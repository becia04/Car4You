@model List<Car>


<link href='https://fonts.googleapis.com/css?family=Montserrat|Cardo' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.9.1.js"></script>
<link href="~/css/home_site.css" rel="stylesheet" />

<header class="main_h">
    <div class="navbar-container">
        <a class="logo" href="#">
            <img class="logo-img" src="~/logo.png" alt="Logo" />
        </a>

        <div class="mobile-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>

        <nav>
            <ul>
                <li><a href=".sec01">Nasze auta</a></li>
                <li><a href=".sec02">Wynajem autolawety</a></li>
                <li><a href=".sec03">Kontakt</a></li>
                <li><a href=".sec04">O nas</a></li>
            </ul>
        </nav>
    </div>
    <div class="line">

    </div>
</header>


<div class="hero">

    <h1><span>SZUBIN</span><br>AUTO-HANDEL</h1>

    <h2>Leszek Bethke</h2>
    <div class="line"></div>
</div>

<section class="section-hero">
    <div class="hero-title scroll-animate slide-up">
        <h1>Auto-Handel Szubin – Twój sprawdzony partner w zakupie auta</h1>
    </div>

    <div class="section-hero-wrapper">
        <div class="section-hero-text">
            <p class="section-hero-paragraph scroll-animate slide-up">
                Szukasz solidnego samochodu w uczciwej cenie? Dobrze trafiłeś! W Auto-Handel Szubin specjalizujemy się w sprzedaży sprawdzonych aut używanych, które przechodzą dokładną selekcję i kontrolę techniczną przed wystawieniem na sprzedaż.
                <br />
                🛠️ Każde auto dokładnie sprawdzamy pod względem technicznym i wizualnym<br />
                📄 Jasna historia pojazdu – udostępniamy pełną dokumentację<br />
                🚗 Różnorodna oferta – samochody miejskie, rodzinne, kombi, SUV-y i nie tylko <br />
                🔧 Możliwość skorzystania z usług serwisowych i przygotowania do rejestracji <br />
                💬 Zawsze możesz liczyć na uczciwe doradztwo i fachową obsługę <br />

                Z nami zyskujesz pewność zakupu i wsparcie nawet po zakupie auta. Działamy lokalnie – z pasją, doświadczeniem i dbałością o każdy detal. <br />

                📍 Znajdziesz nas w Szubinie – zapraszamy do kontaktu i na jazdy próbne!
            </p>
        </div>
        <div class="section-hero-image scroll-animate slide-in">
            <img src="~/img-20250408-wa0005.jpg" class="container_img scroll-animate slide-in" style="max-width:300px; max-height:300px;" />
        </div>
    </div>
</section>

<h1 class="scroll-animate slide-up">Nasze auta</h1>
<p class="scroll-animate slide-up">
    <div class="carousel-container">
        <button class="carousel-btn prev" type="button">‹</button>
        <div class="carousel-track-wrapper">
            <div class="carousel-track">
                @foreach (var car in Model)
                {
                    var mainPhoto = car.Photos.FirstOrDefault(p => p.IsMain);
                    <div class="carousel-card">
                        <div class="car-card">
                            <div class="car-card__background" style="background-image: url('@mainPhoto.PhotoPath');"></div>
                            <div class="car-card__info">
                                <div class="car-card__top">
                                    <div class="car-card__body-type">
                                        <img src="@Url.Content($"{car.BodyTypes.Icon}")" alt="Typ nadwozia" />
                                        <span>@car.BodyTypes.Name</span>
                                    </div>
                                    <div class="car-card__year">@car.Year</div>
                                </div>
                                <h2 class="car-card__title">
                                    @($"{car.CarModel?.Brand?.Name} {car.CarModel?.Name}" +
                                        (car.Version != null ? $" {car.Version.Name}" : ""))
                                </h2>

                                <div class="car-card__details">
                                    <div class="car-card__detail-left">
                                        <span class="label">Paliwo</span>
                                        <span class="value">@car.FuelType</span>
                                    </div>
                                    <div class="car-card__detail-right">
                                        <span class="label">Przebieg</span>
                                        <span class="value">@car.Mileage</span>
                                    </div>
                                </div>
                                <div class="car-card__price">@car.OldPrice</div>
                                <a href="/car/@car.Id" class="car-card__btn btn">Zobacz szczegóły</a>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
        <button class="carousel-btn next" type="button">›</button>
    </div>

</p>
<button class="btn scroll-animate slide-up ">Czytaj więcej</button>
<img src="..." class="container_img scroll-animate slide-in" />






<h1 class="scroll-animate slide-up">Nasze auta</h1>
<p class="scroll-animate slide-up">
 
</p>
<button class="btn scroll-animate slide-up ">Czytaj więcej</button>

    @section Scripts{
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Sticky Header przy scrollu
            window.addEventListener('scroll', () => {
                if (window.scrollY > 100) {
                    document.querySelector('.main_h').classList.add('sticky');
                } else {
                    document.querySelector('.main_h').classList.remove('sticky');
                }
            });

            // --- Mobile Navigation toggle
            document.querySelector('.mobile-toggle')?.addEventListener('click', () => {
                document.querySelector('.main_h').classList.toggle('open-nav');
            });

            // --- Zamknięcie mobilnego menu po kliknięciu linku
            document.querySelectorAll('.main_h li a').forEach(link => {
                link.addEventListener('click', () => {
                    document.querySelector('.main_h')?.classList.remove('open-nav');
                    document.querySelector('.navigation')?.classList.remove('open-nav');
                });
            });

            // --- Płynne scrollowanie do sekcji po kliknięciu w link
            document.querySelectorAll('nav a').forEach(link => {
                link.addEventListener('click', (event) => {
                    const id = link.getAttribute("href");
                    const offset = 70;
                    const target = document.querySelector(id);
                    if (target) {
                        const position = target.offsetTop - offset;
                        window.scrollTo({ top: position, behavior: 'smooth' });
                        event.preventDefault();
                    }
                });
            });

            // --- Scroll-animacja elementów z klasą .scroll-animate
            function onScrollAnimate() {
                const elements = document.querySelectorAll('.scroll-animate');
                elements.forEach(el => {
                    const rect = el.getBoundingClientRect();
                    if (rect.top < window.innerHeight - 100) {
                        el.classList.add('animated');
                    }
                });
            }
            window.addEventListener('scroll', onScrollAnimate);
            window.addEventListener('load', onScrollAnimate);

            // --- Karuzela z płynnym zapętleniem
            const track = document.querySelector('.carousel-track');
            const prevBtn = document.querySelector('.carousel-btn.prev');
            const nextBtn = document.querySelector('.carousel-btn.next');

            let originalCards = Array.from(document.querySelectorAll('.carousel-card'));
            const cardWidth = originalCards[0].offsetWidth + 20;
            const clonesCount = 4;
            let isTransitioning = false;

            // Klonowanie kart na koniec i początek (dla zapętlenia)
            for (let i = 0; i < clonesCount; i++) {
                const firstClone = originalCards[i].cloneNode(true);
                firstClone.classList.add('clone');
                track.appendChild(firstClone);

                const lastClone = originalCards[originalCards.length - 1 - i].cloneNode(true);
                lastClone.classList.add('clone');
                track.insertBefore(lastClone, track.firstChild);
            }

            let allCards = Array.from(document.querySelectorAll('.carousel-card'));
            let index = clonesCount;

            // Ustawienie początkowej pozycji karuzeli
            track.style.transform = `translateX(${-index * cardWidth}px)`;

            // Funkcja do aktualizacji pozycji karuzeli
            function updateCarousel() {
                track.style.transition = 'transform 0.5s ease';
                track.style.transform = `translateX(${-index * cardWidth}px)`;
            }

            // Obsługa kliknięcia przycisku "Next"
            nextBtn?.addEventListener('click', () => {
                if (isTransitioning) return;
                isTransitioning = true;
                index++;
                updateCarousel();
            });

            // Obsługa kliknięcia przycisku "Prev"
            prevBtn?.addEventListener('click', () => {
                if (isTransitioning) return;
                isTransitioning = true;
                index--;
                updateCarousel();
            });

            // Obsługa końca animacji przejścia karuzeli
            track.addEventListener('transitionend', () => {
                allCards = Array.from(document.querySelectorAll('.carousel-card'));

                if (index >= allCards.length - clonesCount) {
                    track.style.transition = 'none';
                    index = clonesCount;
                    track.style.transform = `translateX(${-index * cardWidth}px)`;
                } else if (index < clonesCount) {
                    track.style.transition = 'none';
                    index = allCards.length - clonesCount - 1;
                    track.style.transform = `translateX(${-index * cardWidth}px)`;
                }

                isTransitioning = false;
            });

            // --- Formatowanie przebiegu (np. "123000 km" → "123 000 km")
            document.querySelectorAll('.value').forEach(el => {
                const match = el.textContent.match(/^(\d+)\s?(km)?$/i);
                if (match) {
                    const number = parseInt(match[1].replace(/\s/g, ''));
                    const formatted = number.toLocaleString('pl-PL');
                    el.textContent = `${formatted} km`;
                }
            });

            // --- Formatowanie ceny (np. "99000 PLN" → "99 000 PLN")
            document.querySelectorAll('.car-card__price').forEach(el => {
                const text = el.textContent.replace(/\s/g, '');
                const number = parseInt(text);
                if (!isNaN(number)) {
                    el.textContent = number.toLocaleString('pl-PL') + ' PLN';
                }
            });

        });

        // --- Obsługa poziomego scrolla karuzeli (przyciskami, np. do innej wersji karuzeli)
        function scrollCarousel(direction) {
            const carousel = document.getElementById("carousel");
            const cardWidth = carousel.querySelector('.custom-card').offsetWidth + 20;
            carousel.scrollBy({
                left: direction * cardWidth,
                behavior: 'smooth'
            });
        }
    </script>

    }